(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(10),c=n.n(s),i=(n(16),n(4)),o=n.n(i),l=n(6),u=n(5),d=n(0),b=n(3),j=n(1),h=function(){return Object(j.jsx)("div",{className:"toast-container position-absolute top-0 end-0 p-3",children:Object(j.jsx)("div",{id:"myToastEl",className:"toast text-white bg-danger align-items-center",role:"alert","aria-live":"assertive","aria-atomic":"true",children:Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)("div",{className:"toast-body",children:"Hello, world! This is a toast message."}),Object(j.jsx)("button",{type:"button",className:"btn-close btn-close-white me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"})]})})})},p=n(11),m="user",g=function(e){var t=e.logoutHandler,n=e.loading,a=e.userId;return Object(j.jsxs)("div",{className:"card text-white bg-primary my-5",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h2",{children:"You are authorized"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsxs)("h5",{className:"card-title",children:["Welcome ",a]}),Object(j.jsx)("p",{className:"card-text",children:"Logout to be unAuthorized!"}),Object(j.jsx)("div",{className:"text-end",children:Object(j.jsx)("button",{className:"btn btn-dark",onClick:t,disabled:n,children:"Logout"})})]})]})},O=function(e){var t=e.changeFormHandler,n=e.registerHandler,a=e.loginHandler,r=e.loading;return Object(j.jsxs)("div",{className:"card text-white bg-primary my-5",children:[Object(j.jsx)("div",{className:"card-header",children:Object(j.jsx)("h2",{children:"Authorization"})}),Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("h5",{className:"card-title",children:"Welcome on site"}),Object(j.jsx)("p",{className:"card-text",children:"Login or register to be Authorized!"}),Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("input",{id:"email",name:"email",type:"text",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",onChange:t}),Object(j.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:"Email"})]}),Object(j.jsxs)("div",{className:"input-group mb-3",children:[Object(j.jsx)("input",{id:"password",name:"password",type:"password",className:"form-control","aria-label":"Sizing example input","aria-describedby":"inputGroup-sizing-default",onChange:t}),Object(j.jsx)("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:"Password"})]}),Object(j.jsxs)("div",{className:"text-end",children:[Object(j.jsx)("button",{className:"btn btn-dark",onClick:a,disabled:r,children:"Login"}),Object(j.jsx)("button",{className:"btn btn-dark ms-3",onClick:n,disabled:r,children:"Register"})]})]})]})]})},x=function(){var e=Object(a.useCallback)((function(e){var t=document.getElementById("myToastEl");t&&e&&(t.querySelector(".toast-body").textContent=e,p.a.getOrCreateInstance(t).show())}),[]),t=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),c=Object(b.a)(s,2),i=c[0],u=c[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(l.a)(o.a.mark((function e(t){var n,a,s,c,i,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",a=l.length>2&&void 0!==l[2]?l[2]:null,s=l.length>3&&void 0!==l[3]?l[3]:{},e.prev=3,r(!0),a&&(a=JSON.stringify(a),s["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:a,headers:s});case 8:return c=e.sent,e.next=11,c.json();case 11:if(i=e.sent,c.ok){e.next=14;break}throw new Error(i.message||"Something went wrong");case 14:return r(!1),e.abrupt("return",i);case 18:throw e.prev=18,e.t0=e.catch(3),r(!1),u(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[3,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:i,clearError:Object(a.useCallback)((function(){return u(null)}),[])}}(),n=t.loading,r=t.error,s=t.request,c=t.clearError,i=Object(a.useState)({email:"",password:""}),x=Object(b.a)(i,2),f=x[0],v=x[1],N=function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),c=Object(b.a)(s,2),i=c[0],o=c[1],l=Object(a.useCallback)((function(e,t){r(e),o(t),localStorage.setItem(m,JSON.stringify({userId:t,token:e}))}),[]),u=Object(a.useCallback)((function(e,t){r(null),o(null),localStorage.removeItem(m)}),[]);return Object(a.useEffect)((function(){var e=JSON.parse(localStorage.getItem(m));e&&e.token&&l(e.token,e.userId)}),[l]),{login:l,logout:u,token:n,userId:i}}(),k=N.login,y=N.logout,w=N.token,S=N.userId,C=!!w;function I(){return(I=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("/api/auth/register","POST",Object(d.a)({},f));case 3:t=e.sent,k(t.token,t.userID),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(){return(E=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s("/api/auth/login","POST",Object(d.a)({},f));case 3:t=e.sent,k(t.token,t.userID),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){e(r),c()}),[r,e,c]),Object(j.jsxs)("div",{className:"container",children:[C?Object(j.jsx)(g,{logoutHandler:function(){y()},loading:n,userId:S}):Object(j.jsx)(O,{changeFormHandler:function(e){v(Object(d.a)(Object(d.a)({},f),{},Object(u.a)({},e.target.name,e.target.value)))},registerHandler:function(){return I.apply(this,arguments)},loginHandler:function(){return E.apply(this,arguments)},loading:n}),Object(j.jsx)(h,{})]})};var f=function(){return Object(j.jsx)(x,{})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(f,{})}),document.getElementById("root")),v()}},[[19,1,2]]]);
//# sourceMappingURL=main.f52a433c.chunk.js.map